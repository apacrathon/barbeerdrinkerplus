<!DOCTYPE html>
<!--[if IE 7 ]><html class="ie ie7 lte9 lte8 lte7" lang="en-US"><![endif]-->
<!--[if IE 8]><html class="ie ie8 lte9 lte8" lang="en-US">	<![endif]-->
<!--[if IE 9]><html class="ie ie9 lte9" lang="en-US"><![endif]-->
<!--[if (gt IE 9)|!(IE)]><!-->
<html class="noIE" lang="en-US">
<!--<![endif]-->
	<head>
    <!-- Feathers API -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/core-js/2.1.4/core.min.js"></script>
    <script src="https://unpkg.com/feathers-client@^2.0.0/dist/feathers.js"></script>

    <script src="angular/angular.js"></script>

    <script src="assets/lib/jquery-2.1.3.min.js"></script>
    <script src="assets/lib/jquery.actual.min.js"></script>
    <script src="assets/lib/jquery.scrollTo.min.js"></script>
    <script src="assets/lib/bootstrap.js"></script>

		<title>BarBeerDrinker Plus</title>

		<!-- meta -->
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
		<meta name="viewport" content="width=device-width, initial-scale = 1.0, maximum-scale=1.0, user-scalable=no"/>

		<!-- google fonts -->
		<link href='https://fonts.googleapis.com/css?family=Raleway:500,300' rel='stylesheet' type='text/css'>
		<link rel='stylesheet' href='https://fonts.googleapis.com/css?family=PT+Sans'>
		<link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
		<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:regular,bold"/>

		<!-- css -->
		<link rel="stylesheet" href="assets/css/bootstrap.min.css">
		<link rel="stylesheet" href="assets/css/font-awesome.min.css">
    <link rel="stylesheet" href="assets/css/customCSS.css">
		<link rel="stylesheet" href="assets/css/style.css" media="screen"/>

		<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
		<!--[if lt IE 9]>
    <script src="assets/js/html5shiv.js"></script>
    <script src="assets/lib/respond.js"></script>
    <![endif]-->

		<!--[if IE 8]>
    <script src="assets/lib/selectivizr.js"></script>
    <![endif]-->

    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.4/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.4/js/select2.min.js"></script>
	</head>

	<body>
		<header class="top-header">
			<div class="container">
				<div class="row">
					<div class="col-md-3 col-xs-5 col-sm-4 header-logo">
						<br>
						<a href="index.html">
							<h1 class="logo">BarBeerDrinker <span class="logo-head">Plus</span></h1>
						</a>
					</div>

					<div class="col-md-8 col-md-offset-1 col-xs-7">
						<nav class="navbar navbar-default">
						  	<div class="container-fluid nav-bar">
						    <!-- Brand and toggle get grouped for better mobile display -->
							    <div class="navbar-header">
							      	<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
								        <span class="sr-only">Toggle navigation</span>
								        <span class="icon-bar"></span>
								        <span class="icon-bar"></span>
								        <span class="icon-bar"></span>
							      	</button>
							    </div>

						    	<!-- Collect the nav links, forms, and other content for toggling -->
							    <div class="collapse navbar-collapse navbar-def" id="bs-example-navbar-collapse-1">

							      	<ul class="nav navbar-nav navbar-right">
							        	<li>
											<a href="index.html"><i class="fa fa-home"></i> Home</a>
										</li>
										<li>
											<a href="dashboard.html"><i class="fa fa-tachometer"></i> Manager Dashboard</a>
										</li>
										<li>
											<a href="friends.html"><i class="fa fa-users"></i> Network</a>
										</li>
										<li>
											<a href="#account"><i class="fa fa-cog"></i> Account</a>
										</li>
							      	</ul>
							    </div><!-- /navbar-collapse -->
						  	</div><!-- / .container-fluid -->
						</nav>
					</div>
				</div>
			</div>
		</header>

		<div id="controllerElement" ng-app="myApp" ng-controller="myCtrl">

			<div id="header" class="content-block">

				<section class="center">
          <div class="col-lg-3">
          </div>

          <div class="col-lg-6" id="searchBarsHover" ng-submit="submit()">
            <form id="mainSearchForm" href="searchResults">
              <input id="mainSearchBar" type="text" ng-model="mainSearch" name="mainSearch" class="form-control" placeholder="Search for a bar (Ex: Golden Rail Pub) ">
              <input id="mainSearchBar2" type="text" class="form-control" placeholder="OR City Name (Ex: New York)">
              <input type="submit" hidden="true">
            </form>
          </div>
          <div class="col-lg-3">
          </div>
				</section>
			</div><!-- header -->
      <div class="content-block" id="searchResults1" >
        <section class="center" ng-repeat="j in searchInitiated" >
        <h3 align="center"> Here's what we found! </h3>
        <p align="center"> Showing {{searchInitiated.totalResults}} result(s) </p>
        </section>
        <div style="width: 81%; height: 3px; background: #2b3e51; overflow: hidden; margin: -20px auto" ng-repeat="j in searchInitiated" ></div>
      </div>
      <div class="content-block" style="text-align:center;" ng-if="isLoading == 1">
        <h4>Our Databases336 students are preparing your results!</h4>
        <i class="fa fa-glass fa-pulse fa-5x" aria-hidden="true" ></i>
      </div>
      <div id="searchResultsDiv" ng-if="isLoading == 0">
        <div class="content-block" id="searchResults" ng-repeat="x in barList">
          <div class="barListing">
            <div class="col-lg-1">

            </div>
            <div class="col-lg-3">

              <h2> {{x.name}} </h2>
              <h4 class="barStreet"> {{x.street}} </h4>
              <h4 class="barCityState"> {{x.city}}, {{x.state}} {{x.zipcode}}</h4>
              <div class = "btn-group">
                <button class="btn btn-warning" class="modalMenu" data-toggle="modal" data-target="#ratingsModal" ng-click="ratingClick(x.id,x.name)">
                  <i class="fa fa-star-o fa-lg"></i> Rate this Bar!
                </button>
                <button ng-if="x.isOpen == 1" class="btn btn-success" class="modalMenu" data-toggle="modal" data-target="#checkInModal" ng-click="checkInClick(x.id,x.name)">
                  <i class="fa fa-map-marker fa-inverse fa-lg"></i> Check-in!
                </button>
                <button ng-if="x.isOpen == 0" class="btn btn-success disabled">
                  <i class="fa fa-map-marker fa-inverse fa-lg"></i> Bar Closed
                </button>
              </div>
            </div>
            <div class="col-lg-4">
              <div>
                <div class="star-rating" title="{{x.averageRating}}%">
                  <div class="back-stars">
                    <i class="fa fa-star" aria-hidden="true"></i>
                    <i class="fa fa-star" aria-hidden="true"></i>
                    <i class="fa fa-star" aria-hidden="true"></i>
                    <i class="fa fa-star" aria-hidden="true"></i>
                    <i class="fa fa-star" aria-hidden="true"></i>

                    <div class="front-stars" style="width: {{x.averageRating}}%">
                      <i class="fa fa-star" aria-hidden="true"></i>
                      <i class="fa fa-star" aria-hidden="true"></i>
                      <i class="fa fa-star" aria-hidden="true"></i>
                      <i class="fa fa-star" aria-hidden="true"></i>
                      <i class="fa fa-star" aria-hidden="true"></i>
                    </div>
                  </div>
                </div>
                <p style="font-size:1em;margin-top:-23px;margin-left:140px;">{{x.numRatings}} Total Ratings</p>
              </div>
              <h4>Attire: {{x.attire}} | Capacity: {{x.capacity}}</h4>
              <h4>Typical Crowd: {{x.typicalCrowd}}</h4>
              <a class="toolTipTest" data-toggle="tooltip" title="Accepts Credit Card!"><i rel="popover" class="fa fa-credit-card fa-fw fa-lg" ng-if="x.acceptsCredit == 1" ></i></a>
              <i rel="popover" class="fa fa-users fa-fw fa-lg" ng-if="x.isGoodForGroups == 1" data-toggle="tooltip" title="Good For Groups!"></i>
              <i rel="popover" class="fa fa-wifi fa-fw fa-lg" ng-if="x.hasWifi == 1" data-toggle="tooltip" title="WiFi Access!"></i>
              <img rel="popover" width="16" height="24" src="assets/images/no-smoking.svg" ng-if="x.allowsSmoking == 0" data-toggle="tooltip" title="No Smoking!">
              <img rel="popover"width="16" height="24" src="assets/images/smoking.svg" ng-if="x.allowsSmoking == 1" data-toggle="tooltip" title="Smoking Allowed!">
              <h4 ng-click="menuClick(x.id)" class="modalMenu" data-toggle="modal" data-target="#myModal" id="{{x.id}}">Menu</h4>
            </div>
            <div class="col-lg-3">
              <div>
                <p style="float:left;">Status: </p>
                <p ng-if="x.isOpen == 1" style="color: green;float:left;">Open </p>
                <p ng-if="x.isOpen == 0" style="color: red;float:left;">Closed </p>
                <p ng-if="x.isHappyHour == 1" style="float:left;">|</p>
                <p ng-if="x.isHappyHour == 1" style="color:green;float:left;">Happy Hour</p>
                <br>
              </div>
              <br>
              <div style="float:left;margin-top:-15px;"><i class="fa fa-clock-o"></i> Open - Close</div>
              <br>
              <div style="float:left;margin-top:-15px;">
                {{x.openTime}} - {{x.closeTime}}<br>
                <br>
                HAPPY HOUR:<br>
                Days: {{x.daysList}}
                <br>
                Times: {{x.startTime}} - {{x.endTime}}
              </div>
            </div>

            <div class="col-lg-1">
              <br>
            </div>
            <div style="width: 81%; height: 3px; background: #2b3e51; overflow: hidden; margin: -20px auto" ng-if="x.lastBar != 1" ></div>
          </div>
        </div>
      </div>
      <div class="content-block footer-bottom" id="footer">
        <div class="container">
          <div class="row">
            <div class="text-center">By Raj Patel, Nill Patel, Prabhjot Singh - Database 336 Fall 2017</div>
          </div>
        </div>
      </div>
      <!-- Menu Modal  -->
      <div class="modal fade" id="myModal" role="dialog">
        <div class="modal-dialog">

          <!-- Modal content -->
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">&times;</button>
              <h4 class="modal-title module-title" style="margin: auto">{{barName}}</h4>
            </div>
            <div class="modal-body">
              <div id="modalMenuHeight">
              <div ng-repeat="drink in sellsList">
                <div class="menu">
                  <div class="row">
                    <div class="col-sm-8">
                      <h4 class="menu-title">{{drink.drinkName}}</h4>
                      <div class="menu-detail">Special Happy Hour Price: {{drink.happyHourPrice}}</div>
                    </div>
                    <div class="col-sm-4 menu-price-detail">
                      <h4 class="menu-price">{{drink.price}}</h4>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
          </div>

        </div>
      </div>
		</div>

      <!-- Rating Modal -->
      <div class="modal fade" id="ratingsModal" role="dialog">
        <div class="modal-dialog">
          <!-- Modal content -->
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">&times;</button>
              <h4 class="modal-title" id="ratingsModalBarName">{{barName}}</h4>
              <p style="display:none" id="ratingsModalBarId"> {{barId}} </p>
            </div>
            <div class="modal-body">
              <div class = "btn-group" style="margin: auto;">
                <button type = "button" id="oldDrinkerButton" class = "btn btn-primary">Old Drinker</button>
                <button type = "button" id="newDrinkerButton" class = "btn btn-default">New Drinker</button>
              </div>
              <div id="oldDrinkerForm" class="modalFormShown" >
                <form id="oldDrinkerRatingForm">
                  <div class="form-group">
                    <label>Pick your Name and ID</label>
                    <br>
                    <select class="allDrinkers" name="drinkers[]" value="Select your Name and ID" style="width:100%" id="drinkersDropdown">
                      <optgroup label="Select your Name and ID!">
                        <option ng-repeat="x in drinkersList" value="{{x.id}}">{{x.name}} - {{x.id}}</option>
                      </optgroup>
                    </select>
                  </div>
                  <div class="form-group">
                    <label for="inputOldRating">Rating</label>
                    <input type="text" class="form-control" id="inputOldRating" placeholder="Enter your rating out of 5">
                  </div>
                  <button type="submit" class="btn btn-warning"><i class="fa fa-star-o fa-lg"></i> Submit Rating!</button>
                </form>
              </div>


              <div id="newDrinkerForm" class="modalFormHidden">
                <form id="newDrinkerRatingForm">
                  <div class="form-group">
                    <label for="inputName">Full Name</label>
                    <input type="text" class="form-control" id="inputName" placeholder="Enter your Full Name">
                  </div>
                  <div class="form-group">
                    <label for="inputAge">Age</label>
                    <input type="text" class="form-control" id="inputAge" placeholder="Enter your age">
                    <br>
                    <label for="inputGender">Gender</label>
                    <br>
                    <select id="inputGender" class="allGenders" name="genders[]" value="Select your gender" style="width:100%">
                      <optgroup label="Select your gender!">
                        <option value="1">Male</option>
                        <option value="0">Female</option>
                        <option value="-1">I do not wish to disclose</option>
                      </optgroup>
                    </select>
                  </div>
                  <div class="form-group">
                    <label for="inputCity">City</label>
                    <input type="text" class="form-control" id="inputCity" placeholder="City">
                  </div>
                  <div class="form-group">
                    <label for="inputZip">Zip Code</label>
                    <input type="text" class="form-control" id="inputZip" placeholder="Zipcode">
                  </div>
                  <div class="form-group">
                    <label for="inputState">State</label><br>
                    <select id="inputState" class="allStates" name="states[]" value="Select your state" style="width:100%">
                      <optgroup label="Select your state!">
                        <option value="AL">Alabama</option>
                        <option value="AK">Alaska</option>
                        <option value="AZ">Arizona</option>
                        <option value="AR">Arkansas</option>
                        <option value="CA">California</option>
                        <option value="CO">Colorado</option>
                        <option value="CT">Connecticut</option>
                        <option value="DE">Delaware</option>
                        <option value="DC">District Of Columbia</option>
                        <option value="FL">Florida</option>
                        <option value="GA">Georgia</option>
                        <option value="HI">Hawaii</option>
                        <option value="ID">Idaho</option>
                        <option value="IL">Illinois</option>
                        <option value="IN">Indiana</option>
                        <option value="IA">Iowa</option>
                        <option value="KS">Kansas</option>
                        <option value="KY">Kentucky</option>
                        <option value="LA">Louisiana</option>
                        <option value="ME">Maine</option>
                        <option value="MD">Maryland</option>
                        <option value="MA">Massachusetts</option>
                        <option value="MI">Michigan</option>
                        <option value="MN">Minnesota</option>
                        <option value="MS">Mississippi</option>
                        <option value="MO">Missouri</option>
                        <option value="MT">Montana</option>
                        <option value="NE">Nebraska</option>
                        <option value="NV">Nevada</option>
                        <option value="NH">New Hampshire</option>
                        <option value="NJ">New Jersey</option>
                        <option value="NM">New Mexico</option>
                        <option value="NY">New York</option>
                        <option value="NC">North Carolina</option>
                        <option value="ND">North Dakota</option>
                        <option value="OH">Ohio</option>
                        <option value="OK">Oklahoma</option>
                        <option value="OR">Oregon</option>
                        <option value="PA">Pennsylvania</option>
                        <option value="RI">Rhode Island</option>
                        <option value="SC">South Carolina</option>
                        <option value="SD">South Dakota</option>
                        <option value="TN">Tennessee</option>
                        <option value="TX">Texas</option>
                        <option value="UT">Utah</option>
                        <option value="VT">Vermont</option>
                        <option value="VA">Virginia</option>
                        <option value="WA">Washington</option>
                        <option value="WV">West Virginia</option>
                        <option value="WI">Wisconsin</option>
                        <option value="WY">Wyoming</option>
                      </optgroup>
                    </select>
                  </div>
                  <div class="form-group">
                    <label for="inputNewRating">Rating</label>
                    <input type="text" class="form-control" id="inputNewRating" placeholder="Enter your rating out of 5">
                  </div>
                  <button type="submit" class="btn btn-warning"><i class="fa fa-star-o fa-lg"></i> Submit Rating!</button>
                </form>
              </div>
            </div>

          </div>
        </div>
      </div>

      <!--Check In Modal -->
      <div class="modal fade" id="checkInModal" role="dialog">
        <div class="modal-dialog">
          <!-- Modal content -->
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">&times;</button>
              <h4 class="modal-title" id="checkInModalBarName">{{barName}}</h4>
              <p style="display:none" id="checkInModalBarId"> {{barId}} </p>
            </div>
            <div class="modal-body">
              <div class = "btn-group" style="margin: auto;">
                <button type = "button" id="oldDrinkerButtonCheck" class = "btn btn-primary">Old Drinker</button>
                <button type = "button" id="newDrinkerButtonCheck" class = "btn btn-default">New Drinker</button>
              </div>
              <div id="oldDrinkerFormCheck" class="modalFormShown" >
                <form id="oldDrinkerCheckInForm">
                  <div class="form-group">
                    <label>Pick your Name and ID</label>
                    <br>
                    <select class="allDrinkers" name="drinkers[]" value="Select your Name and ID" style="width:100%" id="drinkersCheckInDropdown">
                      <optgroup label="Select your Name and ID!">
                        <option ng-repeat="x in drinkersList" value="{{x.id}},{{x.name}}">{{x.name}} - {{x.id}}</option>
                      </optgroup>
                    </select>
                  </div>
                  <button type="submit" class="btn btn-success"><i class="fa fa-map-marker fa-inverse fa-lg"></i> Check-In</button>
                </form>
              </div>


              <div id="newDrinkerFormCheck" class="modalFormHidden">
                <form id="newDrinkerCheckInForm">
                  <div class="form-group">
                    <label for="inputName2">Full Name</label>
                    <input type="text" class="form-control" id="inputName2" placeholder="Enter your Full Name">
                  </div>
                  <div class="form-group">
                    <label for="inputAge2">Age</label>
                    <input type="text" class="form-control" id="inputAge2" placeholder="Enter your age">
                    <br>
                    <label for="inputGender2">Gender</label>
                    <br>
                    <select id="inputGender2" class="allGenders" name="genders[]" value="Select your gender" style="width:100%">
                      <optgroup label="Select your gender!">
                        <option value="1">Male</option>
                        <option value="0">Female</option>
                        <option value="-1">I do not wish to disclose</option>
                      </optgroup>
                    </select>
                  </div>
                  <div class="form-group">
                    <label for="inputCity2">City</label>
                    <input type="text" class="form-control" id="inputCity2" placeholder="City">
                  </div>
                  <div class="form-group">
                    <label for="inputZip2">Zip Code</label>
                    <input type="text" class="form-control" id="inputZip2" placeholder="Zipcode">
                  </div>
                  <div class="form-group">
                    <label for="inputState2">State</label><br>
                    <select id="inputState2" class="allStates" name="states[]" value="Select your state" style="width:100%">
                      <optgroup label="Select your state!">
                        <option value="AL">Alabama</option>
                        <option value="AK">Alaska</option>
                        <option value="AZ">Arizona</option>
                        <option value="AR">Arkansas</option>
                        <option value="CA">California</option>
                        <option value="CO">Colorado</option>
                        <option value="CT">Connecticut</option>
                        <option value="DE">Delaware</option>
                        <option value="DC">District Of Columbia</option>
                        <option value="FL">Florida</option>
                        <option value="GA">Georgia</option>
                        <option value="HI">Hawaii</option>
                        <option value="ID">Idaho</option>
                        <option value="IL">Illinois</option>
                        <option value="IN">Indiana</option>
                        <option value="IA">Iowa</option>
                        <option value="KS">Kansas</option>
                        <option value="KY">Kentucky</option>
                        <option value="LA">Louisiana</option>
                        <option value="ME">Maine</option>
                        <option value="MD">Maryland</option>
                        <option value="MA">Massachusetts</option>
                        <option value="MI">Michigan</option>
                        <option value="MN">Minnesota</option>
                        <option value="MS">Mississippi</option>
                        <option value="MO">Missouri</option>
                        <option value="MT">Montana</option>
                        <option value="NE">Nebraska</option>
                        <option value="NV">Nevada</option>
                        <option value="NH">New Hampshire</option>
                        <option value="NJ">New Jersey</option>
                        <option value="NM">New Mexico</option>
                        <option value="NY">New York</option>
                        <option value="NC">North Carolina</option>
                        <option value="ND">North Dakota</option>
                        <option value="OH">Ohio</option>
                        <option value="OK">Oklahoma</option>
                        <option value="OR">Oregon</option>
                        <option value="PA">Pennsylvania</option>
                        <option value="RI">Rhode Island</option>
                        <option value="SC">South Carolina</option>
                        <option value="SD">South Dakota</option>
                        <option value="TN">Tennessee</option>
                        <option value="TX">Texas</option>
                        <option value="UT">Utah</option>
                        <option value="VT">Vermont</option>
                        <option value="VA">Virginia</option>
                        <option value="WA">Washington</option>
                        <option value="WV">West Virginia</option>
                        <option value="WI">Wisconsin</option>
                        <option value="WY">Wyoming</option>
                      </optgroup>
                    </select>
                  </div>
                  <button type="submit" class="btn btn-success"><i class="fa fa-map-marker fa-inverse fa-lg"></i> Check-In</button>
                </form>
              </div>
            </div>

          </div>
        </div>
      </div>

      <!--/#wrapper-->

    <!-- Load libraries first -->
    <script src="assets/lib/socket.io/socket.io.js"></script>
    <script src="assets/lib/script.js"></script>
    <script src="assets/lib/smoothscroll.js"></script>

    <!-- Then, load main app -->
    <script src="app.js"></script>

    <!-- Finally, load everything else -->
    <script src="assets/js/index.js"></script>
    <script src="assets/js/barList.js"></script>
		<script type="text/javascript">

		jQuery(document).ready(function($) {
		  $(window).scroll(function() {
			  if ($(window).scrollTop() > 100 ) {
		 		  $('.top-header').addClass('shows');
        } else {
          $('.top-header').removeClass('shows');
        };
      });
      $(document).ready(function() {
        $('.js-example-basic-multiple').select2();
      });
    });

		jQuery('.scroll').on('click', function(e) {
		  e.preventDefault();
		  jQuery('html, body').animate({
        scrollTop : jQuery(this.hash).offset().top
      }, 1500);
		});
		</script>
	</body>
</html>
